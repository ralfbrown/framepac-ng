/****************************** -*- C++ -*- *****************************/
/*									*/
/* FramepaC-ng								*/
/* Version 0.15, last edit 2019-07-29					*/
/*	by Ralf Brown <ralf@cs.cmu.edu>					*/
/*									*/
/* (c) Copyright 2019 Carnegie Mellon University			*/
/*	This program may be redistributed and/or modified under the	*/
/*	terms of the GNU General Public License, version 3, or an	*/
/*	alternative license agreement as detailed in the accompanying	*/
/*	file LICENSE.  You should also have received a copy of the	*/
/*	GPL (file COPYING) along with this program.  If not, see	*/
/*	http://www.gnu.org/licenses/					*/
/*									*/
/*	This program is distributed in the hope that it will be		*/
/*	useful, but WITHOUT ANY WARRANTY; without even the implied	*/
/*	warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR		*/
/*	PURPOSE.  See the GNU General Public License for more details.	*/
/*									*/
/************************************************************************/

#include <cstdint>
#include "framepac/romanize.h"
#include "framepac/unicode.h"

namespace Fr
{

/************************************************************************/
/*	Types local to this module					*/
/************************************************************************/

struct ISO9Element
   {
      uint16_t codepoint1, codepoint2 ;
   } ;

/************************************************************************/
/************************************************************************/

#ifndef lengthof
#  define lengthof(x) (sizeof(x)/sizeof((x)[0]))
#endif /* lengthof */

/************************************************************************/
/*	Global data for this module					*/
/************************************************************************/

#define ISO843_TABLE_START    0x037C		// Greek
#define ISO9_TABLE_START      0x0400		// Cyrillic
#define ISO9985_TABLE_START   0x0530		// Armenian
#define	ISO295_TABLE_START    0x05B0		// Hebrew
#define ISO233_TABLE_START    0x0600		// Arabic
#define ISO15919_TABLE_START  0x0900		// Devanagari
#define ISO11940_TABLE_START  0x0E00		// Thai
#define ISO9984_TABLE_START   0x10D0		// Georgian
#define ISO843EXT_TABLE_START 0x1F00		// extended Greek

// romanization information for Greek character codepoints
static const ISO9Element primary_table[] =
   {
      { 0, 0 }, { 0, 0 }, { '?', 0 }, { 0, 0 },				// 0x037C-0x037F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0380-0x0383
      { 0x00B4, 0 }, { 0, 0 }, { 0x00C1, 0 }, { 0x00B7, 0 },		// 0x0384-0x0387
      { 0x00C9, 0 }, { 0x012A, 0x0301 }, { 0x00CD, 0 }, { 0, 0 },	// 0x0388-0x038B
      { 0x00D3, 0 }, { 0, 0 }, { 0x00DD, 0 }, { 0x1E52, 0 },		// 0x038C-0x038F
      { 0x1E2F, 0 }, { 'A', 0 }, { 'V', 0 }, { 'G', 0 },		// 0x0390-0x0393
      { 'D', 0 }, { 'E', 0 }, { 'Z', 0 }, { 0x012A, 0 },		// 0x0394-0x0397
      { 'T', 'h' }, { 'I', 0 }, { 'K', 0 }, { 'L', 0 },			// 0x0398-0x039B
      { 'M', 0 }, { 'N', 0 }, { 'X', 0 }, { 'O', 0 },			// 0x039C-0x039F
      { 'P', 0 }, { 'R', 0 }, { 0, 0 }, { 'S', 0 },			// 0x03A0-0x03A3
      { 'T', 0 }, { 'Y', 0 }, { 'F', 0 }, { 'C', 'h' },			// 0x03A4-0x03A7
      { 'P', 's' }, { 0x014C, 0 }, { 0x00CF, 0 }, { 0x0178, 0 },	// 0x03A8-0x03AB
      { 0x00E1, 0 }, { 0x00E9, 0 }, { 0x012B, 0x0301 }, { 0x00ED, 0 },	// 0x03AC-0x03AF
      { 0x00FF, 0x0301 }, { 'a', 0 }, { 'v', 0 }, { 'g', 0 },		// 0x03B0-0x03B3
      { 'd', 0 }, { 'e', 0 }, { 'z', 0 }, { 0x012B, 0 },		// 0x03B4-0x03B7
      { 't', 'h' }, { 'i', 0 }, { 'k', 0 }, { 'l', 0 },			// 0x03B8-0x03BB
      { 'm', 0 }, { 'n', 0 }, { 'x', 0 }, { 'o', 0 },			// 0x03BC-0x03BF
      { 'p', 0 }, { 'r', 0 }, { 's', 0 }, { 's', 0 },			// 0x03C0-0x03C3
      { 't', 0 }, { 'y', 0 }, { 'f', 0 }, { 'c', 'h' },			// 0x03C4-0x03C7
      { 'p', 's' }, { 0x014D, 0 }, { 0x00EF, 0 }, { 0x00FF, 0 },	// 0x03C8-0x03CB
      { 0x00F3, 0 }, { 0x00FD, 0 }, { 0x1E53, 0 }, { 0, 0 },		// 0x03CC-0x03CF
      { 'v', 0 }, { 't', 'h' }, { 'Y', 0 }, { 'Y', 0x0301 },		// 0x03D0-0x03D3
      { 'Y', 0x0308 }, { 'f', 0 }, { 'p', 0 }, { '&', 0 },		// 0x03D4-0x03D7
   // end of Greek codepoints, insert padding until next table
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03D8-0x03DB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03DC-0x03DF
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03E0-0x03E3
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03E4-0x03E7
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03E8-0x03EB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03EC-0x03EF
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03F0-0x03F3
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03F4-0x03F7
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03F8-0x03FB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x03FC-0x03FF
   // romanization information for Unicode codepoints 0x0400 to 0x051F (Cyrillic)
      { 0, 0 }, { 0x00CB, 0 }, { 0x0110, 0 }, { 0x01F4, 0 },		// 0x0400-0403
      { 0x00CA, 0 }, { 0x1E90, 0 }, { 0x00CC, 0 }, { 0x00CF, 0 },	// 0x0404-0407
      { 'J', 0x030C }, { 'L', 0x0302 }, { 'N', 0x0302 }, { 0x0106, 0 },	// 0x0408-040B
      { 0x1E30, 0 }, { 0, 0 }, { 0x016C, 0 }, { 'D', 0x0302 },		// 0x040C-040F
      { 'A', 0 }, { 'B', 0 }, { 'V', 0 }, { 'G', 0 },			// 0x0410-0413
      { 'D', 0 }, { 'E', 0 }, { 0x017D, 0 }, { 'Z', 0 },		// 0x0414-0417
      { 'I', 0 }, { 'J', 0 }, { 'K', 0 }, { 'L', 0 },			// 0x0418-041B
      { 'M', 0 }, { 'N', 0 }, { 'O', 0 }, { 'P', 0 },			// 0x041C-041F
      { 'R', 0 }, { 'S', 0 }, { 'T', 0 }, { 'Y', 0 },			// 0x0420-0423
      { 'F', 0 }, { 'H', 0 }, { 'C', 0 }, { 0x010C, 0 },		// 0x0424-0427
      { 0x0160, 0 }, { 0x015C, 0 }, { 0x02BA, 0 }, { 'Y', 0 },		// 0x0428-042B
      { 0x02B9, 0 }, { 0x00C8, 0 }, { 0x00DB, 0 }, { 0x00C2, 0 },	// 0x042C-042F
      { 'a', 0 }, { 'b', 0 }, { 'v', 0 }, { 'g', 0 },			// 0x0430-0433
      { 'd', 0 }, { 'e', 0 }, { 0x017E, 0 }, { 'z', 0 },		// 0x0434-0437
      { 'i', 0 }, { 'j', 0 }, { 'k', 0 }, { 'l', 0 },			// 0x0438-043B
      { 'm', 0 }, { 'n', 0 }, { 'o', 0}, { 'p', 0 },			// 0x043C-043F
      { 'r', 0 }, { 's', 0 }, { 't', 0 }, { 'u', 0 },			// 0x0440-0443
      { 'f', 0 }, { 'h', 0 }, { 'c', 0 }, { 0x010D, 0 },		// 0x0444-0447
      { 0x0161, 0 }, { 0x015D, 0 }, { 0x02BA, 0 }, { 'y', 0 },		// 0x0448-044B
      { 0x02B9, 0 }, { 0x00E8, 0 }, { 0x00FB, 0 }, { 0x00E2, 0 },	// 0x044C-044F
      { 0, 0 }, { 0x00EB, 0 }, { 0x0111, 0 }, { 0x01F5, 0 },		// 0x0450-0453
      { 0x00EA, 0 }, { 0x1E91, 0 }, { 0x00EC, 0 }, { 0x00EF, 0 },	// 0x0454-0457
      { 0x01F0, 0 }, { 'l', 0x0302 }, { 'n', 0x0302 }, { 0x0107, 0 },	// 0x0458-045B
      { 0x1E31, 0 }, { 0, 0 }, { 0x016D, 0 }, { 'd', 0x0302 },		// 0x045C-045F
      { 0, 0 }, { 0, 0 }, { 0x011A, 0 }, { 0x011B, 0 },			// 0x0460-0463
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0464-0467
      { 0, 0 }, { 0, 0 }, { 0x01CD, 0 }, { 0x01CE, 0 },			// 0x0468-046B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x046C-046F
      { 0, 0 }, { 0, 0 }, { 'F', 0x0300 }, { 'f', 0x0300 },		// 0x0470-0473
      { 0x1EF2, 0 }, { 0x1EF3, 0 }, { 0, 0 }, { 0, 0 },			// 0x0474-0477
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0478-047B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x047C-047F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0480-0483
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0484-0487
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0488-048B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x048C-048F
      { 'G', 0x0300 }, { 'g', 0x0300 }, { 0x0120, 0 }, { 0x0121, 0 },	// 0x0490-0493
      { 0x011E, 0 }, { 0x011F, 0 }, { 0, 0 }, { 0, 0 },			// 0x0494-0497
      { 0, 0 }, { 0, 0 }, { 0x0136, 0 }, { 0x0137, 0 },			// 0x0498-049B
      { 'K',0x0302 }, { 'k',0x0302 }, { 'K', 0x0304 }, { 'k', 0x0304 },	// 0x049C-049F
      { 0x01E8, 0 }, { 0x01E9, 0 }, { 0x0145, 0 }, { 0x0146, 0 },	// 0x04A0-04A3
      { 0x1E44, 0 }, { 0x1E45, 0 }, { 0x1E54, 0 }, { 0x1E55, 0 },	// 0x04A4-04A7
      { 0x00D2, 0 }, { 0x00F2, 0 }, { 0x015E, 0 }, { 0x015F, 0 },	// 0x04A8-04AB
      { 0x0162, 0 }, { 0x0163, 0 }, { 0x00D9, 0 }, { 0x00F9, 0 },	// 0x04AC-04AF
      { 'U', 0x0307 }, { 'u', 0x0307 }, { 0x1E28, 0 }, { 0x1E29, 0 },	// 0x04B0-04B3
      { 'C', 0x0304 }, { 'c', 0x0304 }, { 0x00C7, 0 }, { 0x00E7, 0 },	// 0x04B4-04B7
      { 0x0108, 0 }, { 0x0109, 0 }, { 0x1E24, 0 }, { 0x1E25, 0 },	// 0x04B8-04BB
      { 'C', 0x0306 }, { 'c', 0x0306 }, { 0x00C7, 0x0306 }, { 0x00E7, 0x0306 },	// 0x04BC-04BF
      { 0x2021, 0 }, { 'Z', 0x0306 }, { 'z', 0x0306 }, { 0x1E32, 0 },	// 0x04C0-04C3
      { 0x01E33, 0 }, { 0x013B, 0 }, { 0x013C, 0 }, { 0x0143, 0 },	// 0x04C4-04C7
      { 0x0144, 0 }, { 0x1E46, 0 }, { 0x1E47, 0 }, { 'C', 0x0323 },	// 0x04C8-04CB
      { 'c', 0x0323 }, { 0, 0 }, { 0, 0 }, { 0, 0 },			// 0x04CC-04CF
      { 0x0102, 0 }, { 0x0103, 0 }, { 0x00C4, 0 }, { 0x00E4, 0 },	// 0x04D0-04D3
      { 0x00C6, 0 }, { 0x00E6, 0 }, { 0x0114, 0 }, { 0x0115, 0 },	// 0x04D4-04D7
      { 'A', 0x030B }, { 'a', 0x030B }, { 0x00C0, 0 }, { 0x00E0, 0 },	// 0x04D8-04DB
      { 'Z',0x0304 }, { 'z',0x0304 }, { 'Z', 0x0308 }, { 'z', 0x0308 },	// 0x04DC-04DF
      { 0x0179, 0 }, { 0x017A, 0 }, { 0x012A, 0 }, { 0x012B, 0 },	// 0x04E0-04E3
      { 0x00CE, 0 }, { 0x00EE, 0 }, { 0x00D6, 0 }, { 0x00F6, 0 },	// 0x04E4-04E7
      { 0x00D4, 0 }, { 0x00F4, 0 }, { 0x0150, 0 }, { 0x0151, 0 },	// 0x04E8-04EB
      { 0, 0 }, { 0, 0 }, { 0x016A, 0 }, { 0x016B, 0 },			// 0x04EC-04EF
      { 0x00DC, 0 }, { 0x00FC, 0 }, { 0x0170, 0 }, { 0x0171, 0 },	// 0x04F0-04F3
      { 'C', 0x0308 }, { 'c', 0x0308 }, { 0, 0 }, { 0, 0 },		// 0x04F4-04F7
      { 0x0178, 0 }, { 0x00FF, 0 }, { 0, 0 }, { 0, 0 },			// 0x04F8-04FB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x04FC-04FF
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0500-0503
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0504-0507
      { 0, 0 }, { 0, 0 }, { 0x01F8, 0 }, { 0x01F9, 0 },			// 0x0508-050B
      { 0, 0 }, { 0, 0 }, { 'T', 0x0300 }, { 't', 0x0300 },		// 0x050C-050F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0510-0513
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0514-0517
      { 0, 0 }, { 0, 0 }, { 'Q', 0 }, { 'q', 0 },			// 0x0518-051B
      { 'W', 0 }, { 'w', 0 }, { 0, 0 }, { 0, 0 },			// 0x051C-051F
   // end of Cyrillic, add padding
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0520-0523
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0524-0527
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0528-052B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x052C-052F
   // romanization table for Armenian
      { 0, 0 }, { 'A', 0 }, { 'B', 0 }, { 'G', 0 },			// 0x0530-0x0533
      { 'D', 0 }, { 'E', 0 }, { 'Z', 0 }, { 0x0112, 0 },		// 0x0534-0x0537
      { 0x00CB, 0 }, { 'T', '\'' }, { 'Z', 'H' }, { 'I', 0 },		// 0x0538-0x053B
      { 'L', 0 }, { 'X', 0 }, { 0x00C7, 0 }, { 'K', 0 },		// 0x053C-0x053F
      { 'H', 0 }, { 'J', 0 }, { 'G', 'H' }, { 0x010C, 0 },		// 0x0540-0x0543
      { 'M', 0 }, { 'Y', 0 }, { 'N', 0 }, { 0x0160, 0 },		// 0x0544-0x0547
      { 'O', 0 }, { 0x010C, 0 }, { 'P', 0 }, { 0x01F0, 0 },		// 0x0548-0x054B
      { 'R', 'R' }, { 'S', 0 }, { 'V', 0 }, { 'T', 0 },			// 0x054C-0x054F
      { 'R', 0 }, { 'C', '\'' }, { 'W', 0 }, { 'P', '\'' },		// 0x0550-0x0553
      { 'K', '\'' }, { 0x00D2, 0 }, { 'F', 0 }, { 'E', 'W' },		// 0x0554-0x0557
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0558-0x055B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x055C-0x055F
      { 0, 0 }, { 'a', 0 }, { 'b', 0 }, { 'g', 0 },			// 0x0560-0x0563
      { 'd', 0 }, { 'e', 0 }, { 'z', 0 }, { 0x0113, 0 },		// 0x0564-0x0567
      { 0x00EB, 0 }, { 't', '\'' }, { 'z', 'h' }, { 'i', 0 },		// 0x0568-0x056B
      { 'l', 0 }, { 'x', 0 }, { 0x00E7, 0 }, { 'k', 0 },		// 0x056C-0x056F
      { 'h', 0 }, { 'j', 0 }, { 'g', 'h' }, { 0x010D, 0 },		// 0x0570-0x0573
      { 'm', 0 }, { 'y', 0 }, { 'n', 0 }, { 's', 'h' },			// 0x0574-0x0577
      { 'o', 0 }, { 'c', 'h' }, { 'p', 0 }, { 'j', 0 },			// 0x0578-0x057B
      { 'r', 'r' }, { 's', 0 }, { 'v', 0 }, { 't', 0 },			// 0x057C-0x057F
      { 'r', 0 }, { 'c', '\'' }, { 'w', 0 }, { 'p', '\'' },		// 0x0580-0x0583
      { 'k', '\'' }, { 0x00F2, 0 }, { 'f', 0 }, { 'e', 'w' },		// 0x0584-0x0587
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0588-0x058B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x058C-0x058F
   // end of Armenian
   // romanization table for Hebrew
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0590-0x0593
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0594-0x0597
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0598-0x059B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x059C-0x059F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05A0-0x05A3
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05A4-0x05A7
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05A8-0x05AB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05AC-0x05AF
      { 0, 0 }, { 'e', 0 }, { 'a', 0 }, { 'o', 0 },			// 0x05B0-0x05B3
      { 'i', 0 }, { 'e', 0 }, { 'e', 0 }, { 'a', 0 },			// 0x05B4-0x05B7
      { 'a', 0 }, { 0, 0 }, { 0, 0 }, { 'u', 0 },			// 0x05B8-0x05BB
      { 'u', 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05BC-0x05BF
      { 0, 0 }, { 0, 0 }, { 'o', 0 }, { 0, 0 },				// 0x05C0-0x05C3
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05C4-0x05C7
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05C8-0x05CB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05CC-0x05CF
      { 0x02C0, 0 }, { 'b', 0 }, { 'g', 0 }, { 'd', 0 },		// 0x05D0-0x05D3
      { 'h', 0 }, { 'w', 0 }, { 'z', 0 }, { 0x1E25, 0 },		// 0x05D4-0x05D7
      { 0x1E6F, 0 }, { 'y', 0 }, { 'k', 0 }, { 'k', 0 },		// 0x05D8-0x05DB
      { 'l', 0 }, { 'm', 0 }, { 'm', 0 }, { 'n', 0 },			// 0x05DC-0x05DF
      { 'n', 0 }, { 's', 0 }, { 0x02C1, 0 }, { 'p', 0 },		// 0x05E0-0x05E3
      { 'p', 0 }, { 'c', 0 }, { 'c', 0 }, { 'q', 0 },			// 0x05E4-0x05E7
      { 'r', 0 }, { 0x0161, 0 }, { 't', 0 }, { 0, 0 },			// 0x05E8-0x05EB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05EC-0x05EF
   // end of Hebrew, add padding
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05F0-0x05F3
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05F4-0x05F7
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05F8-0x05FB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x05FC-0x05FF
   // romanization table for Arabic
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0600-0x0603
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0604-0x0607
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0608-0x060B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x060C-0x060F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0610-0x0613
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0614-0x0617
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x0618-0x061B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x061C-0x061F
      { 0, 0 }, { 0x02CC, 0 }, { '\'', 'A' }, { '>', 0 },		// 0x0620-0x0623
      { '&', 0 }, { '<', 0 }, { '}', 0 }, { 'A', 0 },			// 0x0624-0x0627
      { 'b', 0 }, { 0x1E97, 0 }, { 't', 0 }, { 0x1E6F, 0 },		// 0x0628-0x062B
      { 0x01E7, 0 }, { 0x1E25, 0 }, { 0x1E96, 0 }, { 'd', 0 },		// 0x062C-0x062F
      { 0x1E0F, 0 }, { 'r', 0 }, { 'z', 0 }, { 's', 0 },		// 0x0630-0x0633
      { 0x0161, 0 }, { 0x1E63, 0 }, { 0x1E0D, 0 }, { 0x1E6D, 0 },	// 0x0634-0x0637
      { 0x1E93, 0 }, { 0x02BF, 0 }, { 0x0121, 0 }, { 0, 0 },		// 0x0638-0x063B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },				// 0x063C-0x063F
      { '_', 0 }, { 'f', 0 }, { 'q', 0 }, { 'k', 0 },			// 0x0640-0x0643
      { 'l', 0 }, { 'm', 0 }, { 'n', 0 }, { 'h', 0 },			// 0x0644-0x0647
      { 'w', 0 }, { 0x1EF3, 0 }, { 'y', 0 }, { 'F', 0 },		// 0x0648-0x064B
      { 'N', 0 }, { 'K', 0 }, { 'a', 0 }, { 'u', 0 },			// 0x064C-0x064F
      { 'i', 0 }, { '~', 0 }, { 'o', 0 }, { '^', 0 },			// 0x0650-0x0653
      { 0x02C8, 0 }, { '\'', 0 }, { 0, 0 }, { 0, 0 },			// 0x0654-0x0657
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0658-0x065B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x065C-0x065F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0660-0x0663
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0664-0x0667
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0668-0x066B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x066C-0x066F
      { '`', 0 }, { '{', 0 }, { 0, 0 }, { 0, 0 },		// 0x0670-0x0673
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0674-0x0677
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0678-0x067B
      { 0, 0 }, { 0, 0 }, { 'P', 0 }, { 0, 0 },		// 0x067C-0x067F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0680-0x0683
      { 0, 0 }, { 0, 0 }, { 'J', 0 }, { 0, 0 },		// 0x0684-0x0687
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0688-0x068B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x068C-0x068F
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0690-0x0693
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0694-0x0697
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x0698-0x069B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },		// 0x069C-0x069F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06A0-0x06A3
      { 'V', 0 },   { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06A4-0x06A7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06A8-0x06AB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 'G', 0 },		// 0x06AC-0x06AF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06B0-0x06B3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06B4-0x06B7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06B8-0x06BB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06BC-0x06BF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06C0-0x06C3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06C4-0x06C7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06C8-0x06CB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06CC-0x06CF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06D0-0x06D3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06D4-0x06D7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06D8-0x06DB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06DC-0x06DF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06E0-0x06E3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06E4-0x06E7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06E8-0x06EB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06EC-0x06EF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06F0-0x06F3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06F4-0x06F7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06F8-0x06FB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x06FC-0x06FF
   // end of Hebrew
   // romanization table for Syriac
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0700-0x0703
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0704-0x0707
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0708-0x070B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x070C-0x070F
      { '\'', 0 },  { 0, 0 },     { 'b', 0 },   { 'g', 0 },		// 0x0710-0x0713
      { 'g', 0 },   { 'd', 0 },   { 'd', 0 },   { 'h', 0 },		// 0x0714-0x0717
      { 'w', 0 },   { 'z', 0 },   { 0x1E25,0 }, { 0x1E6D,0 },		// 0x0718-0x071B
      { 0x1E6D,0 }, { 'y', 0 },   { 'y', 0 },   { 'k', 0 },		// 0x071C-0x071F
      { 'l', 0 },   { 'm', 0 },   { 'n', 0 },   { 's', 0 },		// 0x0720-0x0723
      { 's', 0 },   { 'e', 0 },   { 'p', 0 },   { 'p', 0 },		// 0x0724-0x0727
      { 0x1E63,0 }, { 'q', 0 },   { 'r', 0 },   { 0x0161,0 },		// 0x0728-0x072B
      { 't', 0 },   { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x072C-0x072F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0730-0x0733
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0734-0x0737
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0738-0x073B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x073C-0x073F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0740-0x0743
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0744-0x0747
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0748-0x074B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x074C-0x074F
   // end of Syriac
   // Arabic supplements (0x0750-0x77F)
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0750-0x0753
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0754-0x0757
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0758-0x075B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x075C-0x075F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0760-0x0763
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0764-0x0767
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0768-0x076B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x076C-0x076F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0770-0x0773
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0774-0x0777
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0778-0x077B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x077C-0x077F
   // end of Arabic supplement
   // romanization data for Thaana
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0780-0x0783
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0784-0x0787
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0788-0x078B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x078C-0x078F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0790-0x0793
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0794-0x0797
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0798-0x079B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x079C-0x079F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07A0-0x07A3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07A4-0x07A7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07A8-0x07AB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07AC-0x07AF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07B0-0x07B3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07B4-0x07B7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07B8-0x07BB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07BC-0x07BF
   // end of Thaana
   // romanization data for NKo / Mande
      { '0', 0 },   { '1', 0 },   { '2', 0 },   { '3', 0 },		// 0x07C0-0x07C3
      { '4', 0 },   { '5', 0 },   { '6', 0 },   { '7', 0 },		// 0x07C4-0x07C7
      { '8', 0 },   { '9', 0 },   { 'a', 0 },   { 'e', 0 },		// 0x07C8-0x07CB
      { 'i', 0 },   { 0x025B,0 }, { 'u', 0 },   { 'o', 0 },		// 0x07CC-0x07CF
      { 0x0254,0 }, { 0, 0 },     { 'n', 0 },   { 'b', 0 },		// 0x07D0-0x07D3
      { 'p', 0 },   { 't', 0 },   { 'j', 0 },   { 'c', 0 },		// 0x07D4-0x07D7
      { 'd', 0 },   { 'r', 0 },   { 'r', 'r' }, { 's', 0 },		// 0x07D8-0x07DB
      { 'g', 'b' }, { 'f', 0 },   { 'k', 0 },   { 'l', 0 },		// 0x07DC-0x07DF
      { 'n', 0 },   { 'm', 0 },   { 0x0272,0 }, { 'n', 0 },		// 0x07E0-0x07E3
      { 'h', 0 },   { 'w', 0 },   { 'y', 0 },   { 0x0272,0 },		// 0x07E4-0x07E7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07E8-0x07EB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07EC-0x07EF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07F0-0x07F3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07F4-0x07F7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07F8-0x07FB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x07FC-0x07FF
   // end of NKo
   // romanization data for Samaritan
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0800-0x0803
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0804-0x0807
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0808-0x080B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x080C-0x080F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0810-0x0813
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0814-0x0817
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0818-0x081B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x081C-0x081F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0820-0x0823
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0824-0x0827
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0828-0x082B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x082C-0x082F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0830-0x0833
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0834-0x0837
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0838-0x083B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x083C-0x083F
   // end of Samaritan
   // romanization data for Mandiac
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0840-0x0843
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0844-0x0847
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0848-0x084B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x084C-0x084F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0850-0x0853
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0854-0x0857
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0858-0x085B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x085C-0x085F
   // end of Mandiac
   // begin Syriac supplement
      { 'n', 'g' }, { 'j', 0 },   { 'n', 'y' }, { 't', 'a' },		// 0x0860-0x0863
      { 'n', 'a' }, { 'n', 'a' }, { 'b', 'a' }, { 'r', 'a' },		// 0x0864-0x0867
      { 'l', 'a' }, { 'l', 'a' }, { 's', 'a' }, { 0, 0 },		// 0x0868-0x086B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x086C-0x086F
   // end Syriac supplement
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0870-0x0873
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0874-0x0877
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0878-0x087B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x087C-0x087F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0880-0x0883
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0884-0x0887
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0888-0x088B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x088C-0x088F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0890-0x0893
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0894-0x0897
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0898-0x089B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x089C-0x089F
   // begin Arabic extended
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08A0-0x08A3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08A4-0x08A7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08A8-0x08AB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08AC-0x08AF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08B0-0x08B3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08B4-0x08B7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08B8-0x08BB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08BC-0x08BF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08C0-0x08C3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08C4-0x08C7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08C8-0x08CB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08CC-0x08CF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08D0-0x08D3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08D4-0x08D7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08D8-0x08DB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08DC-0x08DF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08E0-0x08E3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08E4-0x08E7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08E8-0x08EB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08EC-0x08EF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08F0-0x08F3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08F4-0x08F7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08F8-0x08FB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x08FC-0x08FF
   // end Arabic extended
   // romanization table for Devanagari (ISO 15919)
      { 0, 0 },     {'m',0x0310}, { 0x1E41,0 }, { 0x1E25,0 },		// 0x0900-0x0903
      { 0, 0 },     { 'a', 0 },   { 0x0101,0 }, { 'i', 0 },		// 0x0904-0x0907
      { 0x012B,0 }, { 'u', 0 },   { 0x016B,0 }, { 0x1E5B,0 },		// 0x0908-0x090B
      { 0x1E37,0 }, { 0x00EA,0 }, { 'e', 0 },   { 0x0113,0 },		// 0x090C-0x090F
      { 'a', 'i' }, { 0x00F4,0 }, { 'o', 0 },   { 0x014D,0 },		// 0x0910-0x0913
      { 'a', 'u' }, { 'k', 'a' }, { 'k', 'h' }, { 'g', 'a' },		// 0x0914-0x0917
      { 'g', 'h' }, {0x1E45,'a'}, { 'c', 'a' }, { 'c', 'h' },		// 0x0918-0x091B
      { 'j', 'a' }, { 'j', 'h' }, {0x00F1,'a'}, {0x1E6D,'a'},		// 0x091C-0x091F
      {0x1E6D,'h'}, {0x1E0D,'a'}, {0x1E0D,'h'}, {0x1E47,'a'},		// 0x0920-0x0923
      { 't', 'a' }, { 't', 'h' }, { 'd', 'a' }, { 'd', 'h' },		// 0x0924-0x0927
      { 'n', 'a' }, {'n',0x0331}, { 'p', 'a' }, { 'p', 'h' },		// 0x0928-0x092B
      { 'b', 'a' }, { 'b', 'h' }, { 'm', 'a' }, { 'y', 'a' },		// 0x092C-0x092F
      { 'r', 'a' }, {'r',0x0331}, { 'l', 'a' }, {0x1E37,'a'},		// 0x0930-0x0933
      {'l',0x0331}, { 'v', 'a' }, {0x015B,'a'}, {0x1E63,'a'},		// 0x0934-0x0937
      { 's', 'a' }, { 'h', 'a' }, { 0, 0 },     { 0, 0 },		// 0x0938-0x093B
      { 0, 0 },     { '\'', 0 },  { 0x0101,0 }, { 'i', 0 },		// 0x093C-0x093F
      { 0x012B,0 }, { 'u', 0 },   { 0x016B,0 }, { 0x1E5B,0 },		// 0x0940-0x0943
      { 0x1E5D,0 }, { 0x00EA,0 }, { 'e', 0 },   { 0x0113,0 },		// 0x0944-0x0947
      { 'a', 'i' }, { 0x00F4,0 }, { 'o', 0 },   { 0x014D,0 },		// 0x0948-0x094B
      { 'a', 'u' }, { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x094C-0x094F
      {'o',0x1E43}, { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0950-0x0953
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0954-0x0957
      { 'q', 'a' }, { 'k', 'h' }, { 0x0121,0 }, { 'z', 'a' },		// 0x0958-0x095B
      {0x1E5B,'a'}, {0x1E5B,'h'}, { 'f', 'a' }, {0x1E8F,'a'},		// 0x095C-0x095F
      { 0x1E5D,0 }, { 0x1E39,0 }, { 0x1E37,0 }, { 0x1E39,0 },		// 0x0960-0x0963
      { '.', 0 },   { '.', '.' }, { '0', 0 },   { '1', 0 },		// 0x0964-0x0967
      { '2', 0 },   { '3', 0 },   { '4', 0 },   { '5', 0 },		// 0x0968-0x096B
      { '6', 0 },   { '7', 0 },   { '8', 0 },   { '9', 0 },		// 0x096C-0x096F
      { 0x2026,0 }, { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0970-0x0973
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0974-0x0977
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0978-0x097B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x097C-0x097F
   // Bengali/Assamese
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0980-0x0983
      { 0, 0 },     { 'a', 0 },   { 0x0101,0 }, { 'i', 0 },		// 0x0984-0x0987
      { 0x012B,0 }, { 'u', 0 },   { 0x016B,0 }, { 0, 0 },		// 0x0988-0x098B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x098C-0x098F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0990-0x0993
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0994-0x0997
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x0998-0x099B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x099C-0x099F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09A0-0x09A3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09A4-0x09A7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09A8-0x09AB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09AC-0x09AF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09B0-0x09B3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09B4-0x09B7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09B8-0x09BB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09BC-0x09BF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09C0-0x09C3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09C4-0x09C7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09C8-0x09CB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09CC-0x09CF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09D0-0x09D3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09D4-0x09D7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09D8-0x09DB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09DC-0x09DF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09E0-0x09E3
      { 0, 0 },     { 0, 0 },     { '0', 0 },   { '1', 0 },		// 0x09E4-0x09E7
      { '2', 0 },   { '3', 0 },   { '4', 0 },   { '5', 0 },		// 0x09E8-0x09EB
      { '6', 0 },   { '7', 0 },   { '8', 0 },   { '9', 0 },		// 0x09EC-0x09EF
      { 'r', 'a' }, { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09F0-0x09F3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09F4-0x09F7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09F8-0x09FB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 },		// 0x09FC-0x09FF
   } ;

// romanization table for Thai
static const ISO9Element ISO11940_table[] = 
   {
      { 0, 0 }, { 'k', 0 }, { 'k', 'h' }, { 0x1E33, 'h' },	// 0x0E00-0x0E03
      { 'k', 'h' }, { 'k', 'h' }, { 0x1E33, 'h' }, { 'n', 'g' }, // 0x0E04-0x0E07
      { 'c', 0 }, { 'c', 'h' }, { 'c', 'h' }, { 's', 0 },	// 0x0E08-0x0E0B
      { 'c', 'h' }, { 'y', 0 }, { 0x1E0D, 0 }, { 0x1E6D, 0 },	// 0x0E0C-0x0E0F
      { 0x1E6D, 'h' }, { 0x1E6F, 'h' }, { 't', 'h' }, { 0x1E47, 0 }, // 0x0E10-0x0E13
      { 'd', 0 }, { 't', 0 }, { 't', 'h' }, { 't', 'h' },	// 0x0E14-0x0E17
      { 0x1E6D, 'h' }, { 'n', 0 }, { 'b', 0 }, { 'p', 0 },	// 0x0E18-0x0E1B
      { 'p', 'h' }, { 'f', 0 }, { 'p', 'h' }, { 'f', 0 },	// 0x0E1C-0x0E1F
      { 'p', 'h' }, { 'm', 0 }, { 'y', 0 }, { 'r', 0 },		// 0x0E20-0x0E23
      { 'v', 0 }, { 'l', 0 }, { 0x0142, 0 }, { 'w', 0 },	// 0x0E24-0x0E27
      { 0x1E63, 0 }, { 's', 0 }, { 's', 0 }, { 'h', 0 },	// 0x0E28-0x0E2B
      { 0x1E37, 0 }, { 'x', 0 }, { 0x1E25, 0 }, { 0x01C2, 0 },	// 0x0E2C-0x0E2F
      { 'a', 0 }, { 0x1EA1, 0 }, { 0x0101, 0 }, { 0x00E5, 0 },	// 0x0E30-0x0E33
      { 'i', 0 }, { 0x012B, 0 }, { 0x1EE5, 0 }, { 0x1EE5, 0 },	// 0x0E34-0x0E37
      { 'u', 0 }, { 0x016B, 0 }, { 0, 0 }, { 0, 0 },		// 0x0E38-0x0E3B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },			// 0x0E3C-0x0E3F
      { 'e', 0 }, { 0x00E6, 0 }, { 'o', 0 }, { 0x0131, 0 },	// 0x0E40-0x0E43
      { 0x1ECB, 0 }, { 0x0268, 0 }, { 0x00AB, 0 }, { 0, 0 },	// 0x0E44-0x0E47
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },			// 0x0E48-0x0E4B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0x00A7, 0 },		// 0x0E4C-0x0E4F
      { '0', 0 }, { '1', 0 }, { '2', 0 }, { '3', 0 },		// 0x0E50-0x0E53
      { '4', 0 }, { '5', 0 }, { '6', 0 }, { '7', 0 },		// 0x0E54-0x0E57
      { '8', 0 }, { '9', 0 }, { 0x01C1, 0 }, { 0x00BB, 0 },	// 0x0E58-0x0E5B
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 }			// 0x0E5C-0x0E5F
   } ;

// romanization information for Georgian
static const ISO9Element ISO9984_table[] = 
   {
      { 'a', 0 }, { 'b', 0 }, { 'g', 0 }, { 'd', 0 },		// 0x10D0-0x10D3
      { 'e', 0 }, { 'v', 0 }, { 'z', 0 }, { 't', '\'' },	// 0x10D4-0x10D7
      { 'i', 0 }, { 'k', 0 }, { 'l', 0 }, { 'm', 0 },		// 0x10D8-0x10DB
      { 'n', 0 }, { 'o', 0 }, { 'p', 0 }, { 0x017E, 0 },	// 0x10DC-0x10DF
      { 'r', 0 }, { 's', 0 }, { 't', 0 }, { 'u', 0 },		// 0x10E0-0x10E3
      { 'p', '\'' }, { 'k', '\'' }, { 0x1E21, 0 }, { 'q', 0 },	// 0x10E4-0x10E7
      { 0x0161, 0 }, { 0x010D, '\'' }, { 'c', '\'' }, { 'j', 0 }, // 0x10E8-0x10EB
      { 'c', 0 }, { 0x010D, 0 }, { 'x', 0 }, { 0x01F0, 0 },	// 0x10EC-0x10EF
      { 'h', 0 }, { 0x0113, 0 }, { 'y', 0 }, { 'w', 0 },	// 0x10F0-0x10F3
      { 0x1E96, 0 }, { 0x014D, 0 }, { 'f', 0 }, { 0, 0 }	// 0x10F4-0x10F7
   } ;

// romanization information for Ethiopic (Amharic)
static const ISO9Element Ethiopic_table[] =
   {
      { 'h', 'a' }, { 'h', 'u' }, { 'h', 'i' }, {'h',0x0101},	// 0x1200-0x1203
      { 'h',0xE9 }, { 'h', 'e' }, { 'h', 'o' }, { 'h', 'o' },   // 0x1204-0x1207
      { 'l', 'a' }, { 'l', 'u' }, { 'l', 'i' }, { 'l', 'a' },	// 0x1208-0x120B
      { 'l', 'e' }, { 'l', 'e' }, { 'l', 'o' }, { 'l', 'a' },	// 0x120C-0x120F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1210-0x1213
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1214-0x1217
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1218-0x121B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x121C-0x121F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1220-0x1223
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1224-0x1227
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1228-0x122B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x122C-0x122F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1230-0x1233
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1234-0x1237
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1238-0x123B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x123C-0x123F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1240-0x1243
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1244-0x1247
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1248-0x124B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x124C-0x124F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1250-0x1253
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1254-0x1257
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1258-0x125B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x125C-0x125F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1260-0x1263
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1264-0x1267
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1268-0x126B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x126C-0x126F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1270-0x1273
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1274-0x1277
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1278-0x127B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x127C-0x127F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1280-0x1283
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1284-0x1287
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1288-0x128B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x128C-0x128F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1290-0x1293
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1294-0x1297
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1298-0x129B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x129C-0x129F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12A0-0x12A3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12A4-0x12A7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12A8-0x12AB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12AC-0x12AF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12B0-0x12B3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12B4-0x12B7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12B8-0x12BB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12BC-0x12BF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12C0-0x12C3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12C4-0x12C7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12C8-0x12CB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12CC-0x12CF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12D0-0x12D3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12D4-0x12D7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12D8-0x12DB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12DC-0x12DF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12E0-0x12E3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12E4-0x12E7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12E8-0x12EB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12EC-0x12EF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12F0-0x12F3
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12F4-0x12F7
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12F8-0x12FB
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x12FC-0x12FF
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1300-0x1303
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1304-0x1307
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1308-0x130B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x130C-0x130F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1310-0x1313
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1314-0x1317
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1318-0x131B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x131C-0x131F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1320-0x1323
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1324-0x1327
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1328-0x132B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x132C-0x132F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1330-0x1333
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1334-0x1337
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1338-0x133B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x133C-0x133F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1340-0x1343
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1344-0x1347
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1348-0x134B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x134C-0x134F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1350-0x1353
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1354-0x1357
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1358-0x135B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x135C-0x135F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1360-0x1363
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1364-0x1367
      { 0, 0 },     { '1', 0 },   { '2', 0 },   { '3', 0 },	// 0x1368-0x136B
      { '4', 0 },   { '5', 0 },   { '6', 0 },   { '7', 0 },	// 0x136C-0x136F
      { '8', 0 },   { '9', 0 },   { '1', '0' }, { '2', '0' },	// 0x1370-0x1373
      { '3', '0' }, { '4', '0' }, { '5', '0' }, { '6', '0' },	// 0x1374-0x1377
      { '7', '0' }, { '8', '0' }, { '9', '0' }, { '1', '0' },	// 0x1377-0x137B
      { '1', '0' }, { 0, 0 },     { 0, 0 },     { 0, 0 },	// 0x137C-0x137F
   // Ethiopic Supplement
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1380-0x1383
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1384-0x1387
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1388-0x138B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x138C-0x138F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1390-0x1393
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1394-0x1397
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1398-0x139B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x139C-0x139F
   // Cherokee
      { 'a', 0 },   { 'e', 0 },   { 'i', 0 },   { 'o', 0 }, 	// 0x13A0-0x13A3
      { 'u', 0 },   { 'v', 0 },   { 'g', 'a' }, { 'k', 'a' }, 	// 0x13A4-0x13A7
      { 'g', 'e' }, { 'g', 'i' }, { 'g', 'o' }, { 'g', 'u' }, 	// 0x13A8-0x13AB
      { 'g', 'v' }, { 'h', 'a' }, { 'h', 'e' }, { 'h', 'i' }, 	// 0x13AC-0x13AF
      { 'h', 'o' }, { 'h', 'u' }, { 'h', 'v' }, { 'l', 'a' }, 	// 0x13B0-0x13B3
      { 'l', 'e' }, { 'l', 'i' }, { 'l', 'o' }, { 'l', 'u' }, 	// 0x13B4-0x13B7
      { 'l', 'v' }, { 'm', 'a' }, { 'm', 'e' }, { 'm', 'i' }, 	// 0x13B8-0x13BB
      { 'm', 'o' }, { 'm', 'u' }, { 'n', 'a' }, { 'n', 'a' }, 	// 0x13BC-0x13BF
      { 'n', 'a' }, { 'n', 'e' }, { 'n', 'i' }, { 'n', 'o' }, 	// 0x13C0-0x13C3
      { 'n', 'u' }, { 'n', 'v' }, { 'q', 'a' }, { 'q', 'e' }, 	// 0x13C4-0x13C7
      { 'q', 'i' }, { 'q', 'o' }, { 'q', 'u' }, { 'q', 'v' }, 	// 0x13C8-0x13CB
      { 's', 'a' }, { 's', 0 },   { 's', 'e' }, { 's', 'i' }, 	// 0x13CC-0x13CF
      { 's', 'o' }, { 's', 'u' }, { 's', 'v' }, { 'd', 'a' }, 	// 0x13D0-0x13D3
      { 't', 'a' }, { 'd', 'e' }, { 't', 'e' }, { 'd', 'i' }, 	// 0x13D4-0x13D7
      { 't', 'i' }, { 'd', 'o' }, { 'd', 'u' }, { 'd', 'v' }, 	// 0x13D8-0x13DB
      { 'd', 'l' }, { 't', 'l' }, { 't', 'l' }, { 't', 'l' }, 	// 0x13DC-0x13DF
      { 't', 'l' }, { 't', 'l' }, { 't', 'l' }, { 't', 's' }, 	// 0x13E0-0x13E3
      { 't', 's' }, { 't', 's' }, { 't', 's' }, { 't', 's' }, 	// 0x13E4-0x13E7
      { 't', 's' }, { 'w', 'a' }, { 'w', 'e' }, { 'w', 'i' }, 	// 0x13E8-0x13EB
      { 'w', 'o' }, { 'w', 'u' }, { 'w', 'v' }, { 'y', 'a' }, 	// 0x13EC-0x13EF
      { 'y', 'e' }, { 'y', 'i' }, { 'y', 'o' }, { 'y', 'u' }, 	// 0x13F0-0x13F3
      { 'y', 'v' }, { 'm', 'v' }, { 0, 0 },     { 0, 0 }, 	// 0x13F4-0x13F7
      { 'y', 'e' }, { 'y', 'i' }, { 'y', 'o' }, { 'y', 'u' }, 	// 0x13F8-0x13FB
      { 'y', 'v' }, { 'm', 'v' }, { 0, 0 },     { 0, 0 }, 	// 0x13FC-0x13FF
   // Canadian Aboriginal
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1400-0x1403
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1404-0x1407
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1408-0x140B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x140C-0x140F
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1410-0x1413
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1414-0x1417
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x1418-0x141B
      { 0, 0 },     { 0, 0 },     { 0, 0 },     { 0, 0 }, 	// 0x141C-0x141F
   } ;

// romanization information for extended Greek characters
//    (treated like ISO 843 after ignoring diacritics)
static const ISO9Element ISO843ext_table[] = 
   {
      { 'a', 0 }, { 'a', 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1F00-0x1F03
      { 'a', 0 }, { 'a', 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1F04-0x1F07
      { 'A', 0 }, { 'A', 0 }, { 'A', 0 }, { 'A', 0 },		// 0x1F08-0x1F0B
      { 'A', 0 }, { 'A', 0 }, { 'A', 0 }, { 'A', 0 },		// 0x1F0C-0x1F0F
      { 'e', 0 }, { 'e', 0 }, { 'e', 0 }, { 'e', 0 },		// 0x1F10-0x1F13
      { 'e', 0 }, { 'e', 0 }, { 0, 0 }, { 0, 0 },		// 0x1F14-0x1F17
      { 'E', 0 }, { 'E', 0 }, { 'E', 0 }, { 'E', 0 },		// 0x1F18-0x1F1B
      { 'E', 0 }, { 'E', 0 }, { 0, 0 }, { 0, 0 },		// 0x1F1C-0x1F1F
      { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, // 0x1F20-0x1F23
      { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, // 0x1F24-0x1F27
      { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, // 0x1F28-0x1F2B
      { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, // 0x1F2C-0x1F2F
      { 'i', 0 }, { 'i', 0 }, { 'i', 0 }, { 'i', 0 },		// 0x1F30-0x1F33
      { 'i', 0 }, { 'i', 0 }, { 'i', 0 }, { 'i', 0 },		// 0x1F34-0x1F37
      { 'I', 0 }, { 'I', 0 }, { 'I', 0 }, { 'I', 0 },		// 0x1F38-0x1F3B
      { 'I', 0 }, { 'I', 0 }, { 'I', 0 }, { 'I', 0 },		// 0x1F3C-0x1F3F
      { 'o', 0 }, { 'o', 0 }, { 'o', 0 }, { 'o', 0 },		// 0x1F40-0x1F43
      { 'o', 0 }, { 'o', 0 }, { 0, 0 }, { 0, 0 },		// 0x1F44-0x1F47
      { 'O', 0 }, { 'O', 0 }, { 'O', 0 }, { 'O', 0 },		// 0x1F48-0x1F4B
      { 'O', 0 }, { 'O', 0 }, { 0, 0 }, { 0, 0 },		// 0x1F4C-0x1F4F
      { 'u', 0 }, { 'u', 0 }, { 'u', 0 }, { 'u', 0 },		// 0x1F50-0x1F53
      { 'u', 0 }, { 'u', 0 }, { 'u', 0 }, { 'u', 0 },		// 0x1F54-0x1F57
      { 0, 0 }, { 'U', 0 }, { 0, 0 }, { 'U', 0 },		// 0x1F58-0x1F5B
      { 0, 0 }, { 'U', 0 }, { 0, 0 }, { 'U', 0 },		// 0x1F5C-0x1F5F
      { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 },		// 0x1F60-0x1F63
      { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 },		// 0x1F64-0x1F67
      { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 },		// 0x1F68-0x1F6B
      { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 },		// 0x1F6C-0x1F6F
      { 'a', 0 }, { 'a', 0 }, { 'e', 0 }, { 'e', 0 },		// 0x1F70-0x1F73
      { 0x012B, 0 }, { 0x012B, 0 }, { 'i', 0 }, { 'i', 0 },		// 0x1F74-0x1F77
      { 'o', 0 }, { 'o', 0 }, { 'u', 0 }, { 'u', 0 },		// 0x1F78-0x1F7B
      { 0x014D, 0 }, { 0x014D, 0 }, { 0, 0 }, { 0, 0 },		// 0x1F7C-0x1F7F
      { 'a', 0 }, { 'a', 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1F80-0x1F83
      { 'a', 0 }, { 'a', 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1F84-0x1F87
      { 'A', 0 }, { 'A', 0 }, { 'A', 0 }, { 'A', 0 },		// 0x1F88-0x1F8B
      { 'A', 0 }, { 'A', 0 }, { 'A', 0 }, { 'A', 0 },		// 0x1F8C-0x1F8F
      { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, // 0x1F90-0x1F93
      { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, { 0x012B, 0 }, // 0x1F94-0x1F97
      { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, // 0x1F98-0x1F9B
      { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, { 0x012A, 0 }, // 0x1F9C-0x1F9F
      { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, // 0x1FA0-0x1FA3
      { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, { 0x014D, 0 }, // 0x1FA4-0x1FA7
      { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, // 0x1FA8-0x1FAB
      { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, { 0x014C, 0 }, // 0x1FAC-0x1FAF
      { 'a', 0 }, { 'a', 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1FB0-0x1FB3
      { 'a', 0 }, { 0, 0 }, { 'a', 0 }, { 'a', 0 },		// 0x1FB4-0x1FB7
      { 'A', 0 }, { 'A', 0 }, { 'A', 0 }, { 'A', 0 },		// 0x1FB8-0x1FBB
      { 'A', 0 }, { '\'', 0 }, { 0, 0 }, { '\'', 0 },		// 0x1FBC-0x1FBF
      { '~', 0 }, { 0, 0 }, { 0x012B, 0 }, { 0x012B, 0 },	// 0x1FC0-0x1FC3
      { 0x012B, 0 }, { 0, 0 }, { 0x012B, 0 }, { 0x012B, 0 },	// 0x1FC4-0x1FC7
      { 'E', 0 }, { 'E', 0 }, { 0x012A, 0 }, { 0x012A, 0 },	// 0x1FC8-0x1FCB
      { 0x012A, 0 }, { '\'', '`' }, { 0, 0 }, { 0, 0 },		// 0x1FCC-0x1FCF
      { 'i', 0 }, { 'i', 0 }, { 'i', 0 }, { 'i', 0 },		// 0x1FD0-0x1FD3
      { 0, 0 }, { 0, 0 }, { 'i', 0 }, { 'i', 0 },		// 0x1FD4-0x1FD7
      { 'I', 0 }, { 'I', 0 }, { 'I', 0 }, { 'I', 0 },		// 0x1FD8-0x1FDB
      { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 },			// 0x1FDC-0x1FDF
      { 'u', 0 }, { 'u', 0 }, { 'u', 0 }, { 'u', 0 },		// 0x1FE0-0x1FE3
      { 'r', 0 }, { 'r', 0 }, { 'u', 0 }, { 'u', 0 },		// 0x1FE4-0x1FE7
      { 'U', 0 }, { 'U', 0 }, { 'U', 0 }, { 'U', 0 },		// 0x1FE8-0x1FEB
      { 'R', 0 }, { 0, 0 }, { 0, 0 }, { '`', 0 },		// 0x1FEC-0x1FEF
      { 0, 0 }, { 0, 0 }, { 0x014D, 0 }, { 0x014D, 0 },		// 0x1FF0-0x1FF3
      { 0x014D, 0 }, { 0, 0 }, { 0x014D, 0 }, { 0x014D, 0 },	// 0x1FF4-0x1FF7
      { 'O', 0 }, { 'O', 0 }, { 0x014C, 0 }, { 0x014C, 0 },	// 0x1FF8-0x1FFB
      { 0x014C, 0 }, { '\'', 0 }, { '`', 0 }, { 0, 0 },		// 0x1FFC-0x1FFF
   } ;

/************************************************************************/
/*	Helper Functions						*/
/************************************************************************/

inline bool in_primary_table(wchar_t codepoint)
{
   return ((unsigned)codepoint >= ISO843_TABLE_START && 
	   (unsigned)codepoint < ISO843_TABLE_START + lengthof(primary_table)) ;
}

//----------------------------------------------------------------------

inline bool in_ISO843ext_table(wchar_t codepoint)
{
   return ((unsigned)codepoint >= ISO843EXT_TABLE_START && 
	   (unsigned)codepoint < ISO843EXT_TABLE_START + lengthof(ISO843ext_table)) ;
}

//----------------------------------------------------------------------

inline bool in_ISO9984_table(wchar_t codepoint)
{
   return ((unsigned)codepoint >= ISO9984_TABLE_START && 
	   (unsigned)codepoint < ISO9984_TABLE_START + lengthof(ISO9984_table)) ;
}

//----------------------------------------------------------------------

inline bool in_ISO11940_table(wchar_t codepoint)
{
   return ((unsigned)codepoint >= ISO11940_TABLE_START && 
	   (unsigned)codepoint < ISO11940_TABLE_START + lengthof(ISO11940_table)) ;
}

/************************************************************************/
/*	Methods for class Romanizer					*/
/************************************************************************/

unsigned Romanizer::utf8codepoint(const char *buf, wchar_t &codepoint)
{
   int len = 0 ;
   codepoint = 0 ;
   if (buf)
      {
      unsigned cp = ((unsigned char*)buf)[0] ;
      if ((cp & 0x80) == 0)
	 {
	 codepoint = cp ;
	 return 1 ;
	 }
      else if ((cp & 0xE0) == 0xC0)
	 {
	 len = 2 ;
	 cp &= 0x1F ;
	 }
      else if ((cp & 0xF0) == 0xE0)
	 {
	 len = 3 ;
	 cp &= 0x0F ;
	 }
      else if ((cp & 0xF8) == 0xF0)
	 {
	 len = 4 ;
	 cp &= 0x07 ;
	 }
      else if ((cp & 0xFC) == 0xF8)
	 {
	 len = 5 ;
	 cp &= 0x03 ;
	 }
      else if ((cp & 0xFE) == 0xFC)
	 {
	 len = 6 ;
	 cp &= 0x01 ;
	 }
      else
	 {
	 // high bits are 10, which is a continuation byte and invalid at
	 //   this point
	 codepoint = 0xFFFF ;
	 return 0 ;
	 }
      for (int i = 1 ; i < len ; i++)
	 {
	 if ((buf[i] & 0xC0) != 0x80)
	    {
	    codepoint = 0xFFFF ;
	    return 0 ; // invalid byte sequence
	    }
	 cp = (cp << 6) | (buf[i] & 0x3F) ;
	 }
      codepoint = cp ;
      }
   return len ;
}

//----------------------------------------------------------------------

bool Romanizer::romanizable(wchar_t codepoint)
{
   if (in_primary_table(codepoint))
      {
      if (primary_table[codepoint - ISO843_TABLE_START].codepoint1)
	 return true ;
      }
   else if (in_ISO843ext_table(codepoint))
      {
      if (ISO843ext_table[codepoint - ISO843EXT_TABLE_START].codepoint1)
	 return true ;
      }
   else if (in_ISO9984_table(codepoint))
      {
      if (ISO9984_table[codepoint - ISO9984_TABLE_START].codepoint1)
	 return true ;
      }
   else if (in_ISO11940_table(codepoint))
      {
      if (ISO11940_table[codepoint - ISO11940_TABLE_START].codepoint1)
	 return true ;
      }
   return false ;
}

//----------------------------------------------------------------------

int Romanizer::romanize(wchar_t codepoint, char *buffer)
{
   wchar_t romanized1 ;
   wchar_t romanized2 ;
   int points = romanize(codepoint, romanized1, romanized2) ;
   int bytes = 0 ;
   if (points)
      {
      bool byteswap = false ;
      bytes = Fr::Unicode_to_UTF8(romanized1,buffer,byteswap) ;
      if (points == 2)
	 {
	 int bytes2 = Fr::Unicode_to_UTF8(romanized2,buffer+bytes,byteswap) ;
	 if (bytes2)
	    bytes += bytes2 ;
	 else
	    bytes = 0 ;
	 }
      }
   return bytes ;
}

//----------------------------------------------------------------------

unsigned Romanizer::romanize(wchar_t codepoint, wchar_t &romanized1, wchar_t &romanized2)
{
   const ISO9Element *table = nullptr ;
   if (in_primary_table(codepoint))
      {
      table = primary_table ;
      codepoint -= ISO843_TABLE_START ;
      }
   else if (in_ISO843ext_table(codepoint))
      {
      table = ISO843ext_table ;
      codepoint -= ISO843EXT_TABLE_START ;
      }
   else if (in_ISO9984_table(codepoint))
      {
      table = ISO9984_table ;
      codepoint -= ISO9984_TABLE_START ;
      }
   else if (in_ISO11940_table(codepoint))
      {
      table = ISO11940_table ;
      codepoint -= ISO11940_TABLE_START ;
      }
   if (table)
      {
      romanized1 = table[codepoint].codepoint1 ;
      if (romanized1)
	 {
	 romanized2 = table[codepoint].codepoint2 ;
	 return romanized2 ? 2 : 1 ;
	 }
      }
   romanized1 = codepoint ;
   return 1 ;
}

//----------------------------------------------------------------------

} // end namespace Fr

// end of file romanizer.C //
